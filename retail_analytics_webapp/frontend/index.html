<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetailSight Pro - Enhanced ML Analytics Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Page -->
    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <!-- Navigation Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>RetailSight Pro</h2>
                <div class="user-info">
                    <span id="currentUser">Welcome</span>
                    <button id="logoutBtn" class="btn btn--sm btn--outline">Logout</button>
                </div>
            </div>
            <ul class="nav-menu">
                <li><a href="#" data-page="dashboard" class="nav-link active">Dashboard</a></li>
                <li><a href="#" data-page="advanced-ml" class="nav-link">Advanced ML Graphs</a></li>
                <li><a href="#" data-page="email-alerts" class="nav-link">Email Alert System</a></li>
                <li><a href="#" data-page="revenue" class="nav-link">Revenue Analytics</a></li>
                <li><a href="#" data-page="profit" class="nav-link">Profit Analytics</a></li>
                <li><a href="#" data-page="stock" class="nav-link">Stock Management</a></li>
                <li><a href="#" data-page="ml" class="nav-link">ML Predictions</a></li>
                <li><a href="#" data-page="chatbot" class="nav-link">AI Assistant</a></li>
                <li id="adminNavItem" class="hidden"><a href="#" data-page="admin" class="nav-link">Admin Panel</a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboardPage" class="content-page active">
                <div class="page-header">
                    <h1>Enhanced ML Analytics Dashboard</h1>
                    <p>Real-time insights with advanced ML predictions and automated alerts</p>
                </div>
                
                <!-- Email Alert Status -->
                <div class="alert-status-card">
                    <div class="alert-icon">ðŸ“§</div>
                    <div class="alert-content">
                        <h3>Email Alert System</h3>
                        <div class="alert-status" id="emailStatus">Active - Monitoring stock levels</div>
                        <div class="last-alert" id="lastAlert">Last alert: No critical alerts today</div>
                    </div>
                    <button class="btn btn--outline btn--sm" onclick="testEmailAlert()">Test Alert</button>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">â‚¹</div>
                        <div class="metric-content">
                            <h3>Total Revenue</h3>
                            <div class="metric-value" id="totalRevenue">â‚¹8,20,000</div>
                            <div class="metric-change positive">+12.5% from last month</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ðŸ“Š</div>
                        <div class="metric-content">
                            <h3>Total Profit</h3>
                            <div class="metric-value" id="totalProfit">â‚¹1,64,000</div>
                            <div class="metric-change positive">+8.3% from last month</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ðŸ“¦</div>
                        <div class="metric-content">
                            <h3>Stock Items</h3>
                            <div class="metric-value" id="stockItems">737</div>
                            <div class="metric-change warning">5 items need reorder</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">ðŸ¤–</div>
                        <div class="metric-content">
                            <h3>AI Predictions</h3>
                            <div class="metric-value" id="aiAccuracy">94.2%</div>
                            <div class="metric-change positive">Accuracy improved</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-charts">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Monthly Revenue Trend with ML Forecast</h3>
                        <canvas id="dashboardRevenueChart"></canvas>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="action-buttons">
                        <button class="btn btn--primary" data-page="advanced-ml">View ML Graphs</button>
                        <button class="btn btn--secondary" data-page="email-alerts">Manage Alerts</button>
                        <button class="btn btn--outline" data-page="chatbot">Voice Assistant</button>
                    </div>
                </div>
            </div>

            <!-- Advanced ML Graphs Page -->
            <div id="advanced-mlPage" class="content-page">
                <div class="page-header">
                    <h1>Advanced ML Prediction Graphs</h1>
                    <p>Comprehensive machine learning analytics with confidence intervals and seasonal patterns</p>
                </div>

                <!-- ML Controls -->
                <div class="ml-advanced-controls">
                    <div class="control-group">
                        <label class="form-label">Analysis Type</label>
                        <select id="analysisType" class="form-control">
                            <option value="demand">Demand Forecasting</option>
                            <option value="seasonal">Seasonal Patterns</option>
                            <option value="correlation">Product Correlation</option>
                            <option value="weather">Weather Impact</option>
                            <option value="profit">Profit Prediction</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="form-label">Time Range</label>
                        <select id="timeRange" class="form-control">
                            <option value="3months">Next 3 Months</option>
                            <option value="6months">Next 6 Months</option>
                            <option value="12months">Next 12 Months</option>
                        </select>
                    </div>
                    <button id="generateAdvancedPredictions" class="btn btn--primary">Generate Analysis</button>
                </div>

                <!-- Advanced Charts Grid -->
                <div class="advanced-charts-grid">
                    <div class="chart-row">
                        <div class="chart-description chart-desc-left">
                            <h4>Description</h4>
                            <p>Visualizes predicted demand over time with shaded confidence intervals, highlighting forecast reliability and trends.</p>
                        </div>
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <h3>Time Series Predictions with Confidence Intervals</h3>
                            <canvas id="timeSeriesChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="chart-description chart-desc-left">
                            <h4>Description</h4>
                            <p>Shows how weather variables affect product demand, helping identify seasonal or climate-driven sales patterns.</p>
                        </div>
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <h3>Weather Impact on Demand</h3>
                            <canvas id="weatherImpactChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="chart-description chart-desc-left">
                            <h4>Description</h4>
                            <p>Forecasts future profit margins and highlights variance, supporting financial planning and risk assessment.</p>
                        </div>
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <h3>Profit Prediction with Variance Analysis</h3>
                            <canvas id="profitPredictionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- ML Insights -->
                <div class="ml-insights-section">
                    <h3>ML Model Insights</h3>
                    <div class="insights-cards">
                        <div class="insight-card">
                            <h4>Model Performance</h4>
                            <p>Current accuracy: 94.2% (â†‘2.1% from last month)</p>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 94.2%"></div>
                            </div>
                        </div>
                        <div class="insight-card">
                            <h4>Best Performing Algorithm</h4>
                            <p>LSTM Neural Network for time series forecasting</p>
                            <span class="recommendation-tag">Recommended</span>
                        </div>
                        <div class="insight-card">
                            <h4>Data Quality Score</h4>
                            <p>97.8% - Excellent data completeness</p>
                            <span class="status success">High Quality</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Email Alert System Page -->
            <div id="email-alertsPage" class="content-page">
                <div class="page-header">
                    <h1>Automated Email Alert System</h1>
                    <p>Real-time stock monitoring with instant email notifications</p>
                </div>

                <!-- Email Configuration -->
                <div class="email-config-section">
                    <div class="config-header">
                        <h3>Email Configuration</h3>
                        <div class="config-status">
                            <span class="status success">âœ“ Connected</span>
                        </div>
                    </div>
                    <div class="config-details">
                        <div class="config-item">
                            <label>From Email:</label>
                            <span class="config-value">kavirajanekadesi@gmail.com</span>
                        </div>
                        <div class="config-item">
                            <label>To Email:</label>
                            <span class="config-value">iniyarajan01@gmail.com</span>
                        </div>
                        <div class="config-item">
                            <label>SMTP Server:</label>
                            <span class="config-value">smtp.gmail.com:587</span>
                        </div>
                        <div class="config-item">
                            <label>Status:</label>
                            <span class="config-value status success">Active</span>
                        </div>
                    </div>
                </div>

                <!-- Alert Rules -->
                <div class="alert-rules-section">
                    <h3>Alert Rules Configuration</h3>
                    <div class="rules-grid">
                        <div class="rule-card">
                            <div class="rule-header">
                                <h4>Understock Alert</h4>
                                <div class="rule-toggle">
                                    <input type="checkbox" checked id="understockToggle">
                                    <label for="understockToggle">Enabled</label>
                                </div>
                            </div>
                            <div class="rule-details">
                                <p>Trigger when stock level drops below reorder point</p>
                                <div class="threshold-setting">
                                    <label>Threshold:</label>
                                    <input type="number" value="50" class="form-control" style="width: 80px;">
                                    <span>% of reorder level</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rule-card">
                            <div class="rule-header">
                                <h4>Critical Stock Alert</h4>
                                <div class="rule-toggle">
                                    <input type="checkbox" checked id="criticalToggle">
                                    <label for="criticalToggle">Enabled</label>
                                </div>
                            </div>
                            <div class="rule-details">
                                <p>Immediate alert for critically low stock</p>
                                <div class="threshold-setting">
                                    <label>Threshold:</label>
                                    <input type="number" value="25" class="form-control" style="width: 80px;">
                                    <span>% of reorder level</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Alerts -->
                <div class="recent-alerts-section">
                    <h3>Recent Email Alerts</h3>
                    <div id="recentAlerts" class="alerts-list">
                        <!-- Alerts will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Alert Testing -->
                <div class="alert-testing-section">
                    <h3>Test Email System</h3>
                    <div class="test-controls">
                        <button class="btn btn--primary" onclick="testEmailAlert()">Send Test Alert</button>
                        <button class="btn btn--outline" onclick="sendDemoUnderstock()">Demo Understock Alert</button>
                    </div>
                </div>
            </div>

            <!-- Revenue Analytics Page -->
            <div id="revenuePage" class="content-page">
                <div class="page-header">
                    <h1>Revenue Analytics</h1>
                    <p>Detailed revenue analysis and trends</p>
                </div>
                
                <!-- <div class="analytics-grid">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Monthly Revenue</h3>
                        <canvas id="monthlyRevenueChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Product Revenue Breakdown</h3>
                        <canvas id="productRevenueChart"></canvas>
                    </div>
                </div> -->

                <div class="revenue-table">
                    <h3>Product Performance</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Revenue</th>
                                <th>Growth</th>
                                <th>Performance</th>
                            </tr>
                        </thead>
                        <tbody id="revenueTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Other existing pages... -->
            <div id="profitPage" class="content-page">
                <div class="page-header">
                    <h1>Profit Analytics</h1>
                    <p>Profit margins and optimization insights</p>
                </div>
                
                <div class="analytics-grid">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Monthly Profit Trend</h3>
                        <canvas id="monthlyProfitChart"></canvas>
                    </div>
                    <!-- <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Profit Margins by Product</h3>
                        <canvas id="profitMarginChart"></canvas>
                    </div> -->
                </div>

                <div class="profit-insights">
                    <h3>Profit Optimization Insights</h3>
                    <div class="insight-cards">
                        <div class="insight-card">
                            <h4>Top Performer</h4>
                            <p><strong>Bread Loaf</strong> has the highest profit margin at 22.1%</p>
                        </div>
                        <div class="insight-card">
                            <h4>Growth Opportunity</h4>
                            <p><strong>Rice 1KG Pack</strong> shows potential for margin improvement</p>
                        </div>
                        <div class="insight-card">
                            <h4>Cost Optimization</h4>
                            <p>Reducing waste can increase overall profit by 8.5%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div id="visualPage" class="content-page">
                <div class="page-header">
                    <h1>Visual Analytics</h1>
                    <p>Comprehensive visual data representation</p>
                </div>
                
                <div class="visual-grid">
                    <div class="chart-container" style="position: relative; height: 350px;">
                        <h3>Yearly Revenue Growth</h3>
                        <canvas id="yearlyGrowthChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 350px;">
                        <h3>Seasonal Patterns</h3>
                        <canvas id="seasonalChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 350px;">
                        <h3>Performance Comparison</h3>
                        <canvas id="performanceChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 350px;">
                        <h3>AI Prediction Accuracy</h3>
                        <canvas id="accuracyChart"></canvas>
                    </div>
                </div>
            </div> -->

            <div id="stockPage" class="content-page">
                <div class="page-header">
                    <h1>Enhanced Stock Management</h1>
                    <p>Real-time inventory with automated reordering and email alerts</p>
                </div>
                
                <div class="stock-overview">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Current Stock Levels vs Reorder Points</h3>
                        <canvas id="stockLevelsChart"></canvas>
                    </div>
                </div>

                <div class="stock-controls">
                    <div class="control-panel">
                        <h3>Reorder Management</h3>
                        <div class="reorder-stats">
                            <div class="stat-item">
                                <span class="stat-label">Pending Orders:</span>
                                <span class="stat-value" id="pendingOrders">2</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Critical Stock:</span>
                                <span class="stat-value critical" id="criticalStock">2</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Email Alerts:</span>
                                <span class="stat-value" id="emailAlertsCount">Enabled</span>
                            </div>
                        </div>
                        <button id="bulkReorderBtn" class="btn btn--primary">Bulk Reorder Critical Items</button>
                    </div>
                </div>

                <div class="stock-table">
                    <h3>Detailed Stock Information</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Current</th>
                                <th>Reorder Level</th>
                                <th>Supplier</th>
                                <th>Lead Time</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="stockTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="recent-orders">
                    <h3>Recent Orders</h3>
                    <div id="recentOrdersList" class="orders-list">
                    </div>
                </div>
            </div>

            <div id="mlPage" class="content-page">
                <div class="page-header">
                    <h1>Enhanced ML Predictions</h1>
                    <p>AI-powered 12-month demand forecasting with confidence scores</p>
                </div>
                
                <div class="ml-controls">
                    <div class="control-group">
                        <label class="form-label">Select Month for Detailed Predictions</label>
                        <select id="predictionMonth" class="form-control">
                            <option value="1">January 2025</option>
                            <option value="2">February 2025</option>
                            <option value="3">March 2025</option>
                            <option value="4">April 2025</option>
                            <option value="5">May 2025</option>
                            <option value="6">June 2025</option>
                            <option value="7">July 2025</option>
                            <option value="8">August 2025</option>
                            <option value="9">September 2025</option>
                            <option value="10">October 2025</option>
                            <option value="11">November 2025</option>
                            <option value="12">December 2025</option>
                        </select>
                    </div>
                    <button id="generatePredictions" class="btn btn--primary">Generate Predictions</button>
                    <button id="exportPredictions" class="btn btn--outline">Export Report</button>
                </div>

                <div class="predictions-overview">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>12-Month Demand Forecast</h3>
                        <canvas id="yearlyPredictionChart"></canvas>
                    </div>
                </div>

                <div class="predictions-grid">
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Monthly Demand Predictions</h3>
                        <canvas id="predictionChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 400px;">
                        <h3>Confidence Scores</h3>
                        <canvas id="confidenceChart"></canvas>
                    </div>
                </div>

                <div class="prediction-cards" id="predictionCards">
                    <!-- Prediction cards will be populated by JavaScript -->
                </div>

                <div class="seasonal-insights">
                    <h3>Seasonal Insights & Recommendations</h3>
                    <div id="seasonalInsights" class="insights-grid">
                        <!-- Seasonal insights will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Enhanced AI Assistant Page -->
            <div id="chatbotPage" class="content-page">
                <div class="page-header">
                    <h1>Optimized AI Assistant with Voice Support</h1>
                    <p>Enhanced voice recognition and contextual business intelligence</p>
                </div>

                <!-- Voice Status Dashboard -->
                <div class="voice-dashboard">
                    <div class="voice-status-card">
                        <div class="voice-icon-large">ðŸŽ¤</div>
                        <div class="voice-info">
                            <h3>Voice Recognition Status</h3>
                            <div class="voice-indicators">
                                <div class="indicator">
                                    <span class="indicator-label">Engine:</span>
                                    <span class="indicator-value" id="voiceEngine">Web Speech API</span>
                                </div>
                                <div class="indicator">
                                    <span class="indicator-label">Status:</span>
                                    <span class="indicator-value" id="voiceConnectionStatus">Ready</span>
                                </div>
                                <div class="indicator">
                                    <span class="indicator-label">Accuracy:</span>
                                    <span class="indicator-value" id="voiceAccuracy">98.5%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ai-controls">
                    <div class="voice-controls">
                        <button id="voiceToggle" class="btn btn--primary voice-btn">
                            <span class="voice-icon">ðŸŽ¤</span>
                            <span class="voice-text">Start Voice</span>
                        </button>
                        <button id="speakerToggle" class="btn btn--secondary">
                            <span class="speaker-icon">ðŸ”Š</span>
                            <span>Voice Response: ON</span>
                        </button>
                        <div class="voice-status" id="voiceStatus">Enhanced voice recognition ready</div>
                    </div>
                    
                    <div class="suggested-queries">
                        <h4>Enhanced Business Queries:</h4>
                        <div class="suggestion-chips" id="suggestionChips">
                            <!-- Suggestion chips will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Chat messages will be populated here -->
                    </div>
                    <div class="chat-input-container">
                        <div class="chat-input-area">
                            <input type="text" id="chatInput" class="form-control" placeholder="Ask about analytics, predictions, stock, email alerts, ML insights...">
                            <button id="sendMessage" class="btn btn--primary">Send</button>
                        </div>
                    </div>
                </div>

                <div class="chat-analytics">
                    <h3>Enhanced Query Analytics</h3>
                    <div class="analytics-items">
                        <div class="analytics-item">
                            <span class="label">Total Queries:</span>
                            <span class="value" id="totalQueries">0</span>
                        </div>
                        <div class="analytics-item">
                            <span class="label">Voice Queries:</span>
                            <span class="value" id="voiceQueries">0</span>
                        </div>
                        <div class="analytics-item">
                            <span class="label">Success Rate:</span>
                            <span class="value" id="successRate">98.5%</span>
                        </div>
                        <div class="analytics-item">
                            <span class="label">Context Accuracy:</span>
                            <span class="value" id="contextAccuracy">96.2%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Panel Page -->
            <div id="adminPage" class="content-page">
                <div class="page-header">
                    <h1>Admin Panel</h1>
                    <p>User management and system settings</p>
                </div>
                
                <div class="admin-sections">
                    <div class="admin-section">
                        <h3>User Management</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Role</th>
                                    <th>Last Login</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                            </tbody>
                        </table>
                    </div>

                    <div class="admin-section">
                        <h3>System Settings</h3>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label class="form-label">Email Alert Frequency</label>
                                <select class="form-control">
                                    <option>Immediate</option>
                                    <option>Hourly</option>
                                    <option>Daily</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label class="form-label">AI Model Refresh (hours)</label>
                                <input type="number" class="form-control" value="24">
                            </div>
                            <div class="setting-item">
                                <label class="form-label">Voice Assistant</label>
                                <input type="checkbox" checked>
                            </div>
                            <div class="setting-item">
                                <label class="form-label">Stock Alert Threshold</label>
                                <input type="number" class="form-control" value="50">
                            </div>
                        </div>
                        <button class="btn btn--primary">Save Settings</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification hidden">
        <div class="notification-content">
            <span id="notificationText"></span>
            <button id="closeNotification" class="notification-close">&times;</button>
        </div>
    </div>

    <!-- Order Modal -->
    <div id="orderModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Place Reorder</h3>
                <button id="closeModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Product</label>
                    <input type="text" id="modalProduct" class="form-control" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Quantity</label>
                    <input type="number" id="modalQuantity" class="form-control" min="1">
                </div>
                <div class="form-group">
                    <label class="form-label">Supplier</label>
                    <input type="text" id="modalSupplier" class="form-control" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Expected Delivery</label>
                    <input type="text" id="modalDelivery" class="form-control" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--outline" id="cancelOrder">Cancel</button>
                <button class="btn btn--primary" id="confirmOrder">Place Order</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>